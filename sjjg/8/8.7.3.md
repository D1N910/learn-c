# 外部排序-置换_选择排序
可用“置换-选择排序”进一步减少初始归并段数量

## 土办法构造初始归并段
可以用一片更大的内存区域来进行内部排序（如：可容纳18个记录）

用于内部排序的内存工作区WA可容纳l个记录，则每个初始归并段也只能包含 l 个记录，若文件共有n 个记录，则初始归并段的数量 r = n/l

## 置换-选择排序

初始待排序文件 Fl（24个段，这个是放到磁盘的）：（正常只能够生成24/3=8个归并段，因为）

初始归并段输出文件 FO（这个是磁盘的缓冲区，这个是操作系统、计算机组成原理的知识）：

内存工作区WA：注：假设用于内部排序的内存工作区只能容纳3个记录，那么正常的话就是这三个记录在兜兜转转了。

假设是递增排序

* 引入神奇的 MINIMAX，记录上一个输出去的关键字，每输出去一个，就从初始待排序文件 Fl拉一个，然后选取 WA中最小的同时大于等于MINIMAX的可以放入到归并段中。
* 当WA全满，且都是小于 MINIMAX 的时候，则完成一次归并段的输出。然后再将WA中的拿来进行下一次的输出

使用置换-选择排序，可以让每个初始归并段的长度超越内存工作区大小的限制。

太妙了！

设初始待排文件为F，初始归并段输出文件为FO，内存工作区为WA，FO和WA的初始状态为
空，WA可容纳w个记录。（置换选择算法的步骤如下：
1）从FI输入w个记录到工作区WA。
2）从WA中选出其中关键字取最小值的记录，记为MINIMAX记录。
3)将MINIMAX记录输出到FO中去。
4）若FI不空，则从FI输入下一个记录到WA中。
5) 从WA中所有关键字比MINIMAX记录的关键字大的记录中选出最小关键字记录，作为新的
MINIMAX记录。
6）重复3）～5)，直至在WA中选不出新的MINIMAX记录为止，由此得到`一个初始归并段`，输
出一个`归并段的结束标志`到FO中去。
7）重复2）～6)，直至WA为空。由此得到全部初始归并段。