# 哈夫曼树

## 知识总览

- 带权路径长度
- 哈夫曼树的定义
- 哈夫曼树的构造 *
- 哈夫曼编码（哈夫曼树的应用） *


## 带权路径长度

结点的权：有某种现实含义的数值（如：表示结点的重要性等）

结点的带权路径长度：从树的根到该结点的路径长度（经过的边数）与该结点上权值的乘积

树的带权路径长度：树中所有叶结点的带权路径长度之和（WPL, Weighted Path Length）

哈夫曼树：在含有 n 个带权叶结点的二叉树中，其中带权路径长度（WPL）最小的二叉树称为哈夫曼树，也称为最优二叉树。 —— 哈夫曼树不唯一

## 哈夫曼树的构造
给定n个权值为w1、w2的结点，构造哈夫曼树的算法描述如下：
- 1、将这n个结点分别作为n棵仅含有一个结点的二叉树，构成森林 F。
- 2、构造一个新结点，从F中选取两颗根结点权值最小的两棵树作为新结点的左、右子树，并且将新结点的根节点的权值置为左、右子树上根节点的权值之和。
- 3、从F中删除刚才选出的两棵树，同时将新得到的树加入F中。
- 4、重复2-3直到 F 中只剩下一棵树。

## 哈夫曼树的特点
- 1、每个初始结点最终都会成为叶结点，且权值越小的结点到根节点的路径长度越大
- 2、n 个结点，两两结合，需要结合 n-1 次
- 3、结点总数：2n-1（结合一次是 2*2 -1）
- 5、哈夫曼树中不存在度为 1 的节点
- 6、深度为 n，最长路径为 n-1，
- 7、哈夫曼树不唯一，但是WPL必然相同且为最优

## 哈弗曼编码

e.g. 发电报 (.和-，0和1)

用0和1来传递答案，咳嗽代表0，打嗝代表1

```
在 ASCII 编码中，每个字符长度是八个比特位，100个选择题就要800次
A - 0100 0001
B - 0100 0010
C - 0100 0011
D - 0100 0100
```

但是很长，考虑缩短这个字符，比如弄成这样进行代表
A - 00
B - 01
C - 10
D - 11

这样的话就可以只用200次了。

选择题100题：80题选C，10题选A，8题选B，2题选D

左路径代表0，右路径代表1

所有答案二进制长度 = 80*2 + 10*2 + 80*2 + 2*2 = 200 bit 就是树的带权路径长度

这个字符编码长度可以更优。用哈夫曼树来优化，出现越多的字符应该对应的数字越短。

左路径代表0，右路径代表1。

可变长度编码：允许对不同字符用不等长的二进制位表示

这样的话 WPL = 1*80 + 2*10 + 3*8 +  3*2 = 130

如何进行翻译？

``` 这样虽然短，但是有歧义！
C - 0
A - 1
B - 111
D - 110
CAAABD- 0111111110 -> 0 C,111 B,111 B, 110 D，CBBD这样的话就会解码错误，有歧义。
```

```
前缀编码：无歧义。没有一个编码是另一个编码的前缀，则称这样的为前缀编码
C - 0
A - 10
B - 111
D - 110
CAAABD- 0101010111110 -> 0 C,10 A,10 A,10 A,111 B,110 D，这样就可以了。
```

哈夫曼树里的所有字符只能作为叶子节点。

由哈夫曼树得到的编码就是哈夫曼编码——字符集中的每一个字符都作为一个叶子结点，每个字符出现的频度作为结点的权值。—— 左边看成多少也没关系。

哈夫曼树不唯一，因此哈夫曼树编码不唯一。

— 哈夫曼编码可以用于数据的压缩，对于出现少的用少的数字来记住