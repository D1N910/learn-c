# çº¢é»‘æ ‘
## ä¸ºä»€ä¹ˆè¦å‘æ˜Žçº¢é»‘æ ‘
å¹³è¡¡äºŒå‰æ ‘ AVLï¼šæ’å…¥/åˆ é™¤ å¾ˆå®¹æ˜“ç ´åâ€œå¹³è¡¡â€ç‰¹æ€§ï¼Œéœ€è¦é¢‘ç¹è°ƒæ•´æ ‘çš„å½¢æ€ã€‚å¦‚ï¼šæ’å…¥æ“ä½œå¯¼è‡´ä¸
å¹³è¡¡ï¼Œåˆ™éœ€è¦å…ˆè®¡ç®—å¹³è¡¡å› å­ï¼Œæ‰¾åˆ°æœ€å°ä¸å¹³è¡¡å­æ ‘ï¼ˆæ—¶é—´å¼€é”€å¤§ï¼‰ï¼Œå†è¿›è¡Œ LL/RR/LR/RL è°ƒæ•´
çº¢é»‘æ ‘ RBTï¼šæ’å…¥/åˆ é™¤ å¾ˆå¤šæ—¶å€™ä¸ä¼šç ´åâ€œçº¢é»‘â€ç‰¹æ€§ï¼Œæ— éœ€é¢‘ç¹è°ƒæ•´æ ‘çš„å½¢æ€ã€‚å³ä¾¿éœ€è¦è°ƒæ•´ï¼Œä¸€èˆ¬éƒ½å¯ä»¥åœ¨å¸¸æ•°çº§æ—¶é—´å†…å®Œæˆ

å¹³è¡¡äºŒå‰æ ‘ï¼šé€‚ç”¨äºŽä»¥æŸ¥ä¸ºä¸»ã€å¾ˆå°‘æ’å…¥/åˆ é™¤çš„åœºæ™¯
çº¢é»‘æ ‘ï¼šé€‚ç”¨å¹²é¢‘ç¹æ’å…¥ï¼Œåˆ é™¤çš„åœºæ™¯ï¼Œå®žç”¨æ€§æ›´å¼º ðŸ‘çŽ°å®žä¸­å¸¸ç”¨

## çº¢é»‘æ ‘å¤§æ¦‚ä¼šæ€Žä¹ˆè€ƒï¼Ÿ
çº¢é»‘æ ‘çš„å®šä¹‰ã€æ€§è´¨ä¸€ä¸€é€‰æ‹©é¢˜
çº¢é»‘æ ‘çš„æ’å…¥/åž‹é™¤ä¸€ä¸€è¦èƒ½æ‰‹ç»˜æ’å…¥è¿‡ç¨‹ï¼ˆä¸å¤ªå¯èƒ½è€ƒä»£ç ï¼Œç•¥å¤æ‚ï¼‰ï¼Œåˆ é™¤æ“ä½œä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œä¹Ÿè®¸ä¸è€ƒ

## å®šä¹‰
çº¢é»‘æ ‘æ˜¯äºŒå‰æŽ’åºæ ‘ ã€‰ å·¦å­æ ‘ç»“ç‚¹å€¼ï¼œæ ¹ç»“ç‚¹å€¼ï¼œå³å­æ ‘ç»“ç‚¹å€¼
ä¸Žæ™®é€šBSTç›¸æ¯”ï¼Œæœ‰ä»€ä¹ˆè¦æ±‚ï¼Ÿ

â‘ æ¯ä¸ªç»“ç‚¹æˆ–æ˜¯çº¢è‰²ï¼Œæˆ–æ˜¯é»‘è‰²çš„
â‘¡æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„
â‘¢å¶ç»“ç‚¹ï¼ˆå¤–éƒ¨ç»“ç‚¹ã€NULLç»“ç‚¹ã€å¤±è´¥ç»“ç‚¹ï¼Œçº¢é»‘æ ‘æŠŠå¤±è´¥èŠ‚ç‚¹ä½œä¸ºå¶å­ç»“ç‚¹ï¼‰å‡æ˜¯é»‘è‰²çš„
â‘£ä¸å­˜åœ¨ä¸¤ä¸ªã€ç›¸é‚»/è¿žç»­/ç›´è¿žã€‘çš„çº¢ç»“ç‚¹ï¼ˆå³çº¢ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹å’Œå­©å­ç»“ç‚¹å‡æ˜¯é»‘è‰²ï¼‰-çº¢-çº¢- âŒ é»‘-çº¢-é»‘ ðŸ‘
â‘¤å¯¹æ¯ä¸ªç»“ç‚¹ï¼Œä»Žè¯¥èŠ‚ç‚¹åˆ°ä»»ä¸€å¶ç»“ç‚¹çš„ç®€å•è·¯å¾„ä¸Šï¼Œæ‰€å«é»‘ç»“ç‚¹çš„æ•°ç›®ç›¸åŒ

``` c
struct RBnode {
    //çº¢é»‘æ ‘çš„ç»“ç‚¹å®šä¹‰
    int key; //å…³é”®å­—çš„å€¼
    RBnode* parent; // çˆ¶èŠ‚ç‚¹æŒ‡é’ˆ
    RBnode* lChild; // å·¦å­©å­æŒ‡é’ˆ
    RBnode* rChild; // å³å­©å­æŒ‡é’ˆ
    int color; // ç»“ç‚¹é¢œè‰²ï¼Œå¦‚ï¼šå¯ç”¨ 0/1 è¡¨ç¤º é»‘/çº¢ï¼Œä¹Ÿå¯ä½¿ç”¨æžšä¸¾åž‹enumè¡¨ç¤ºé¢œè‰²
};
```
å£è¯€
å·¦æ ¹å³ï¼Œæ ¹å¶ï¼ˆå¤±è´¥èŠ‚ç‚¹ï¼‰é»‘
ä¸çº¢çº¢ï¼Œé»‘è·¯åŒ

### è¡¥å……æ¦‚å¿µ
é»‘é«˜
ç»“ç‚¹çš„é»‘é«˜ bhï¼Œä»ŽæŸç»“ç‚¹å‡ºå‘ï¼ˆä¸å«è¯¥ç»“ç‚¹ï¼‰åˆ°è¾¾ä»»ä¸€ç©ºå¶ç»“ç‚¹çš„è·¯å¾„ä¸Šé»‘ç»“ç‚¹æ€»æ•°ï¼ˆåªéœ€è¦æ•°ä¸€æ¡å°±è¡Œï¼‰

### æ€§è´¨
æ€§è´¨1ï¼šä»Žæ ¹èŠ‚ç‚¹åˆ°å¶ç»“ç‚¹çš„æœ€é•¿è·¯å¾„ä¸å¤§äºŽæœ€çŸ­è·¯å¾„çš„2å€ï¼ˆè€ƒè™‘é»‘è·¯åŒå’Œä¸çº¢çº¢ï¼‰
æ€§è´¨2ï¼šæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘é«˜åº¦h â‰¤2log2(n + 1)
å¯ä»¥ç”¨æ€§è´¨2è¯æ˜Žçº¢é»‘æ ‘æŸ¥æ‰¾æ“ä½œæ—¶é—´å¤æ‚åº¦= O(log2n)ã€æŸ¥æ‰¾æ•ˆçŽ‡å’ŒAVLæ ‘ç›¸åŒæ•°é‡çº§ã€‘

### æŸ¥æ‰¾
ä¸Ž BSTã€AVL ç›¸åŒï¼Œä»Žæ ¹å‡ºå‘ï¼Œå·¦å°å³å¤§ï¼Œè‹¥æŸ¥æ‰¾åˆ°ä¸€ä¸ªç©ºå¶èŠ‚ç‚¹ï¼Œåˆ™æŸ¥æ‰¾å¤±è´¥

## æ’å…¥
å’ŒAVLå¼‚æ›²åŒå·¥

* å…ˆæŸ¥æ‰¾ï¼Œç¡®å®šæ’å…¥ä½ç½®ï¼ˆåŽŸç†åŒäºŒå‰æŽ’åºæ ‘ï¼‰ï¼Œæ’å…¥æ–°ç»“ç‚¹ï¼ˆæŒ‰ç…§ä¸‹é¢çš„æ–¹æ³•ï¼Œåªä¼šè¿åä¸çº¢çº¢ï¼‰
* æ–°ç»“ç‚¹æ˜¯æ ¹ä¸€ä¸€æŸ“ä¸ºé»‘è‰²
* æ–°ç»“ç‚¹éžæ ¹ä¸€ä¸€æŸ“ä¸ºçº¢è‰²
* * è‹¥æ’å…¥æ–°ç»“ç‚¹åŽ…ä¾ç„¶æ»¡è¶³çº¢é»‘æ ‘å®šä¹‰ï¼Œåˆ™æ’å…¥ç»“æŸ
* * è‹¥æ’å…¥æ–°ç»“ç‚¹åŽä¸æ»¡è¶³çº¢è’¸æ ‘å®šä¹‰ï¼Œéœ€è¦è°ƒæ•´ï¼Œä½¿å…¶é‡æ–°æ»¡è¶³çº¢é»‘æ ‘å®šä¹‰
* * * å¦‚ä½•è°ƒæ•´ï¼šçœ‹æ–°ç»“ç‚¹å”å”çš„è„¸è‰²ï¼ˆå”å”=çˆ¶ç»“ç‚¹çš„å…„å¼Ÿï¼Œè„¸è‰²=é¢œè‰²ï¼‰
* * * * * é»‘å”ï¼šæ—‹è½¬+æŸ“è‰²ï¼ˆâ€œé»‘æ—‹é£Žâ€çœ‹ç»“ç‚¹ä½ç½®ï¼‰
* * * * * * LLåž‹ï¼šå³å•æ—‹ï¼Œçˆ¶æ¢çˆ·+æŸ“è‰²ï¼ˆçˆ¶ã€çˆ·é¢œè‰²å–åï¼‰
* * * * * * RRåž‹ï¼šå·¦å•æ—‹ï¼Œçˆ¶æ¢çˆ·+æŸ“è‰²
* * * * * * LRåž‹ï¼šå·¦ã€å³åŒæ—‹ï¼Œå„¿æ¢çˆ·+æŸ“è‰²ï¼ˆå„¿ã€çˆ·é¢œè‰²å–åï¼‰
* * * * * * RLåž‹ï¼šå³ã€å·¦åŒæ—‹ï¼Œå„¿æ¢çˆ·+æŸ“è‰²
* * * * * çº¢å”ï¼šæŸ“è‰²+å˜æ–°
* * * * * * å”çˆ¶çˆ·æŸ“è‰²ï¼ˆç¬¬ä¸€æ­¥ï¼‰ï¼Œçˆ·å˜ä¸ºæ–°ç»“ç‚¹ï¼ˆè§†ä¸ºæ–°æ’å…¥çš„ç»“ç‚¹ï¼ä»Žä¸Šï¼‰
* * * * * * * å”çˆ¶çˆ·æŸ“è‰²ï¼ˆç¬¬ä¸€æ­¥ï¼‰ï¼Œçˆ·å˜ä¸ºæ–°ç»“ç‚¹ï¼ˆè§†ä¸ºæ–°æ’å…¥çš„ç»“ç‚¹ï¼ç„¶åŽä»Žä¸Šå¾€ä¸‹èµ°ï¼çœ‹ç¬¦åˆå“ªä¸ªï¼ï¼‰
æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹æ—¶ï¼Œåªç”¨çœ‹æ˜¯å¦ç ´åâ€œä¸çº¢çº¢â€å°±è¡Œã€‚
å½“æ ‘è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™éƒ½ä¸ç”¨è°ƒæ•´æ ‘çš„ç»“æž„äº†ã€‚
å‡ºçŽ°ç›¸åŒçš„æ•°æ®ï¼Œæ•°æ®ç»“æž„æ˜¯ä¸€é—¨åº”ç”¨çš„ç§‘å­¦ï¼ŒæŒ‰ç…§è‡ªå·±å®žé™…éœ€æ±‚æ’å…¥ã€‚

### ä¸Žé»‘é«˜ç›¸å…³çš„å®šä¹‰
ç»“ç‚¹çš„é»‘é«˜ bhä¸€ä¸€ä»ŽæŸç»“ç‚¹å‡ºå‘ï¼ˆä¸å«è¯¥ç»“ç‚¹ï¼‰åˆ°è¾¾ä»»ä¸€å¶ç»“ç‚¹çš„è·¯å¾„ä¸Šé»‘ç»“ç‚¹æ€»æ•°
æ€è€ƒï¼šæ ¹èŠ‚ç‚¹é»‘é«˜ä¸ºhçš„çº¢é»‘æ ‘ï¼Œå†…éƒ¨ç»“ç‚¹æ•°ï¼ˆå…³é”®å­—ã€‚éžå¤–å¤–éƒ¨èŠ‚ç‚¹ï¼‰è‡³å°‘æœ‰å¤šå°‘ä¸ªï¼Ÿ
å›žç­”ï¼šå†…éƒ¨ç»“ç‚¹æ•°æœ€å°‘çš„æƒ…å†µä¸€ä¸€æ€»å…±hå±‚é»‘ç»“ç‚¹çš„æ»¡æ ‘å½¢æ€
ç»“è®ºï¼šè‹¥æ ¹èŠ‚ç‚¹é»‘é«˜ä¸ºhï¼Œå†…éƒ¨èŠ‚ç‚¹
ï¼ˆå…³é”®å­—ï¼‰æœ€å°‘æœ‰2^h-1ä¸ªï¼ˆå…¨æ˜¯é»‘èŠ‚ç‚¹æ»¡æ ‘çŠ¶æ€ï¼Œå› ä¸ºä¸æ˜¯æ»¡æ ‘çš„è¯ï¼Œå°±è¿åäº†â€œé»‘è·¯åŒâ€ï¼‰

æ€§è´¨1è¯æ˜Žï¼šä»»ä½•ä¸€æ¡ æŸ¥æ‰¾å¤±è´¥è·¯å¾„ä¸Šé»‘ç»“ç‚¹æ•°é‡éƒ½ç›¸åŒï¼Œè€Œè·¯å¾„ä¸Šä¸èƒ½è¿žç»­å‡ºçŽ°ä¸¤ä¸ªçº¢ç»“ç‚¹ï¼Œå³çº¢ç»“ç‚¹åªèƒ½ç©¿æ’åœ¨å„ä¸ªé»‘ç»“ç‚¹ä¸­é—´

æ€§è´¨2è¯æ˜Žï¼šè‹¥çº¢é»‘æ ‘æ€»é«˜åº¦ä¸ºhï¼ˆè¿™é‡Œçº¦å®šæ ¹èŠ‚ç‚¹é«˜åº¦ä¸º0ã€‚æœ‰çš„æ•™æè·ŸèŠ‚ç‚¹ï¼‰ã€‚åˆ™æ ¹èŠ‚ç‚¹é»‘é«˜>=h/2(å› ä¸ºä¸çº¢çº¢)ï¼Œå› æ­¤å†…éƒ¨ç»“ç‚¹æ•° n >=2^(h/2-1)-1ï¼Œåˆ™h<=2log(2)(n+1)

### çº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œï¼ˆä¸è€ƒï¼‰
é‡è¦è€ƒç‚¹ï¼š
â‘ çº¢é»‘æ ‘åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦= O(log(2)n)
â‘¡åœ¨çº¢é»‘æ ‘ä¸­åˆ é™¤ç»“ç‚¹çš„å¤„ç†æ–¹å¼å’Œâ€œäºŒå‰æŽ’åºæ ‘çš„åˆ é™¤â€ä¸€æ ·
â‘¢æŒ‰â‘¡åˆ é™¤ç»“ç‚¹åŽï¼Œå¯èƒ½ç ´åâ€œçº¢é»‘æ ‘ç‰¹æ€§â€ï¼Œæ­¤æ—¶éœ€è¦è°ƒæ•´ç»“ç‚¹é¢œè‰²ã€ä½ç½®ï¼Œä½¿å…¶å†æ¬¡æ»¡
è¶³â€œçº¢é»‘æ ‘ç‰¹æ€§â€